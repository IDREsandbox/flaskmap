{% extends "base.html" %}
{% block content %}


<!DOCTYPE html>
<html>
<head>
	<title>Jane Map</title>

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico" />

    <link rel="stylesheet" href="../static/css/leaflet.css"/>
    <script src="../static/js/leaflet.js"></script>


</head>
<body>



<div class="wrapper-" id="mapid" style="width: 100%; height: 400px;"></div>
<script>

	var mapCoords = [37.770715, -122.433421]
	var map = L.map('mapid').setView(mapCoords, 12);
	L.tileLayer('https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png', {
		maxZoom: 19,
		attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>, Tiles courtesy of <a href="http://hot.openstreetmap.org/" target="_blank">Humanitarian OpenStreetMap Team</a>'
	}).addTo(map);


	function addMarker(lat,lon,name){
	// Add marker to map at click location; add popup window
		console.log(lat,lon);
		markerOptions=
				{
                    radius: 5,
                    fillColor: "#AF1E23",
                    color: "#FFFFFF",
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 0.9
                }
		L.circleMarker([lat,lon],markerOptions).bindPopup("<b>"+name+"</b>").addTo(map);
	}
	var popup = L.popup();
	{% for event in events %}
		addMarker({{event.lat}},{{event.lon}},"{{event.event_name}}");
	{% endfor %}
</script>

	
</body>
</html>
{% endblock %}